{% if cluster is defined and cluster.cluster_type | default('') == "aks" and cluster.auth_type | default('') == "azure_explicit" %}
    - name: kubeconfig
      workspaceKey: azure:sp@kubeconfig:{{ cluster.resource_group | default('undefined') }}/{{ cluster.name | default('undefined') }}
    - name: az_subscriptionId
      workspaceKey: k8s:file@secret/{{ custom.azure_service_principal_secret_name | default('undefined') }}:subscriptionId
    - name: az_clientId
      workspaceKey: k8s:file@secret/{{ custom.azure_service_principal_secret_name | default('undefined') }}:clientId
    - name: az_tenantId
      workspaceKey: k8s:file@secret/{{ custom.azure_service_principal_secret_name | default('undefined') }}:tenantId
    - name: az_clientSecret
      workspaceKey: k8s:file@secret/{{ custom.azure_service_principal_secret_name | default('undefined') }}:clientSecret
{% elif cluster is defined and cluster.cluster_type | default('') == "aks" and cluster.auth_type | default('') == "azure_service_principal_secret" %}
    - name: kubeconfig
      workspaceKey: azure:sp@kubeconfig:{{ cluster.resource_group | default('undefined') }}/{{ cluster.name | default('undefined') }}
    - name: az_subscriptionId
      workspaceKey: k8s:file@secret/{{ cluster.auth_secret | default('undefined') }}:subscriptionId
    - name: az_clientId
      workspaceKey: k8s:file@secret/{{ cluster.auth_secret | default('undefined') }}:clientId
    - name: az_tenantId
      workspaceKey: k8s:file@secret/{{ cluster.auth_secret | default('undefined') }}:tenantId
    - name: az_clientSecret
      workspaceKey: k8s:file@secret/{{ cluster.auth_secret | default('undefined') }}:clientSecret
{% elif cluster is defined and cluster.cluster_type | default('') == "aks" and cluster.auth_type | default('') == "azure_managed_identity" %}
    - name: kubeconfig
      workspaceKey: azure:identity@kubeconfig:{{ cluster.resource_group | default('undefined') }}/{{ cluster.name | default('undefined') }}
{% elif cluster is defined and cluster.cluster_type | default('') == "eks" and cluster.auth_type | default('') == "aws_workload_identity" %}
    - name: kubeconfig
      workspaceKey: aws:workload_identity@kubeconfig:{{ cluster.region | default('us-east-1') }}/{{ cluster.cluster_name | default('undefined') }}
{% elif cluster is defined and cluster.cluster_type | default('') == "eks" and cluster.auth_type | default('') == "aws_pod_identity" %}
    - name: kubeconfig
      workspaceKey: aws:workload_identity@kubeconfig:{{ cluster.region | default('us-east-1') }}/{{ cluster.cluster_name | default('undefined') }}
{% elif cluster is defined and cluster.cluster_type | default('') == "eks" and cluster.auth_type | default('') == "aws_explicit" %}
    - name: kubeconfig
      workspaceKey: aws:cli@kubeconfig:{{ cluster.region | default('us-east-1') }}/{{ cluster.cluster_name | default('undefined') }}
    - name: AWS_ACCESS_KEY_ID
      workspaceKey: k8s:file@secret/{{ custom.aws_credentials_secret_name | default('undefined') }}:AWS_ACCESS_KEY_ID
    - name: AWS_SECRET_ACCESS_KEY
      workspaceKey: k8s:file@secret/{{ custom.aws_credentials_secret_name | default('undefined') }}:AWS_SECRET_ACCESS_KEY
{% elif cluster is defined and cluster.cluster_type | default('') == "eks" and cluster.auth_type | default('') == "aws_secret" %}
    - name: kubeconfig
      workspaceKey: aws:cli@kubeconfig:{{ cluster.region | default('us-east-1') }}/{{ cluster.cluster_name | default('undefined') }}
    - name: AWS_ACCESS_KEY_ID
      workspaceKey: k8s:file@secret/{{ cluster.auth_secret | default('undefined') }}:AWS_ACCESS_KEY_ID
    - name: AWS_SECRET_ACCESS_KEY
      workspaceKey: k8s:file@secret/{{ cluster.auth_secret | default('undefined') }}:AWS_SECRET_ACCESS_KEY
{% elif cluster is defined and cluster.cluster_type | default('') == "eks" %}
    - name: kubeconfig
      workspaceKey: aws:cli@kubeconfig:{{ cluster.region | default('us-east-1') }}/{{ cluster.cluster_name | default('undefined') }}
{% elif custom is defined and custom.kubeconfig_secret_name | default('') != '' %}
    - name: kubeconfig
      workspaceKey: {{ custom.kubeconfig_secret_name | default('undefined') }}
{% elif custom is defined and custom.kubeconfig_key is defined %}
    - name: kubeconfig
      workspaceKey: "{{ custom.kubeconfig_key }}"
{% elif secrets is defined and secrets.kubernetes_kubeconfig is defined %}
    - name: kubeconfig
      workspaceKey: "{{ secrets.kubernetes_kubeconfig }}"
{% else %}
    - name: kubeconfig
      workspaceKey: AUTH DETAILS NOT FOUND
{% endif %}
