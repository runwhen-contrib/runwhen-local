{"version":3,"file":"behind-base-branch-cache.js","sourceRoot":"","sources":["../../../lib/util/git/behind-base-branch-cache.ts"],"names":[],"mappings":";;AAIA,8DAsBC;AAED,8DAeC;AA3CD,yCAAsC;AACtC,oDAA+C;AAG/C,SAAgB,yBAAyB,CACvC,UAAkB,EAClB,SAA+B,EAC/B,UAAkB,EAClB,aAAmC;IAEnC,MAAM,KAAK,GAAG,IAAA,qBAAQ,GAAE,CAAC;IACzB,MAAM,MAAM,GAAG,KAAK,CAAC,QAAQ,EAAE,IAAI,CACjC,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,UAAU,KAAK,UAAU,CAC7C,CAAC;IAEF,IACE,MAAM;QACN,MAAM,CAAC,GAAG,KAAK,SAAS;QACxB,MAAM,CAAC,UAAU,KAAK,UAAU;QAChC,MAAM,CAAC,aAAa,KAAK,aAAa;QACtC,MAAM,CAAC,YAAY,KAAK,SAAS,EACjC,CAAC;QACD,OAAO,MAAM,CAAC,YAAY,CAAC;IAC7B,CAAC;IAED,OAAO,IAAI,CAAC;AACd,CAAC;AAED,SAAgB,yBAAyB,CACvC,UAAkB,EAClB,YAAqB;IAErB,MAAM,KAAK,GAAG,IAAA,qBAAQ,GAAE,CAAC;IACzB,MAAM,MAAM,GAAG,KAAK,CAAC,QAAQ,EAAE,IAAI,CACjC,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,UAAU,KAAK,UAAU,CAC7C,CAAC;IAEF,IAAI,CAAC,MAAM,EAAE,CAAC;QACZ,eAAM,CAAC,KAAK,CAAC,uDAAuD,CAAC,CAAC;QACtE,OAAO;IACT,CAAC;IAED,MAAM,CAAC,YAAY,GAAG,YAAY,CAAC;AACrC,CAAC","sourcesContent":["import { logger } from '../../logger';\nimport { getCache } from '../cache/repository';\nimport type { LongCommitSha } from './types';\n\nexport function getCachedBehindBaseResult(\n  branchName: string,\n  branchSha: LongCommitSha | null,\n  baseBranch: string,\n  baseBranchSha: LongCommitSha | null,\n): boolean | null {\n  const cache = getCache();\n  const branch = cache.branches?.find(\n    (branch) => branch.branchName === branchName,\n  );\n\n  if (\n    branch &&\n    branch.sha === branchSha &&\n    branch.baseBranch === baseBranch &&\n    branch.baseBranchSha === baseBranchSha &&\n    branch.isBehindBase !== undefined\n  ) {\n    return branch.isBehindBase;\n  }\n\n  return null;\n}\n\nexport function setCachedBehindBaseResult(\n  branchName: string,\n  isBehindBase: boolean,\n): void {\n  const cache = getCache();\n  const branch = cache.branches?.find(\n    (branch) => branch.branchName === branchName,\n  );\n\n  if (!branch) {\n    logger.debug(`setCachedBehindBaseResult(): Branch cache not present`);\n    return;\n  }\n\n  branch.isBehindBase = isBehindBase;\n}\n"]}