{"version":3,"file":"common.js","sourceRoot":"","sources":["../../../../lib/config/presets/local/common.ts"],"names":[],"mappings":";;AAMA,sCA0BC;AAED,sDAeC;AAjDD,4CAAyC;AACzC,wDAAqD;AACrD,mFAA8E;AAE9E,kCAAyE;AAElE,KAAK,UAAU,aAAa,CACjC,IAAY,EACZ,QAAgB,EAChB,SAAkB,EAClB,GAAY;IAEZ,IAAI,GAAkB,CAAC;IACvB,IAAI,CAAC;QACH,GAAG,GAAG,MAAM,mBAAQ,CAAC,UAAU,CAAC,QAAQ,EAAE,IAAI,EAAE,GAAG,IAAI,SAAS,CAAC,CAAC;IACpE,CAAC;IAAC,OAAO,GAAG,EAAE,CAAC;QACb,IAAI,GAAG,YAAY,uCAAiB,EAAE,CAAC;YACrC,MAAM,GAAG,CAAC;QACZ,CAAC;QAED,eAAM,CAAC,KAAK,CACV,eAAe,QAAQ,iBAAiB,IAAI,KAAK,GAAG,CAAC,OAAO,GAAG,CAChE,CAAC;QAEF,MAAM,IAAI,KAAK,CAAC,2BAAoB,CAAC,CAAC;IACxC,CAAC;IAED,IAAI,CAAC,GAAG,EAAE,CAAC;QACT,MAAM,IAAI,KAAK,CAAC,2BAAoB,CAAC,CAAC;IACxC,CAAC;IAED,OAAO,IAAA,kBAAW,EAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;AACpC,CAAC;AAED,SAAgB,qBAAqB,CACnC,IAAY,EACZ,UAAkB,EAClB,UAA8B,EAC9B,QAAgB,EAChB,GAAY;IAEZ,OAAO,IAAA,kBAAW,EAAC;QACjB,IAAI;QACJ,UAAU;QACV,UAAU;QACV,QAAQ;QACR,GAAG;QACH,KAAK,EAAE,aAAa;KACrB,CAAC,CAAC;AACL,CAAC","sourcesContent":["import { logger } from '../../../logger';\nimport { platform } from '../../../modules/platform';\nimport { ExternalHostError } from '../../../types/errors/external-host-error';\nimport type { Preset } from '../types';\nimport { PRESET_DEP_NOT_FOUND, fetchPreset, parsePreset } from '../util';\n\nexport async function fetchJSONFile(\n  repo: string,\n  fileName: string,\n  _endpoint?: string,\n  tag?: string,\n): Promise<Preset> {\n  let raw: string | null;\n  try {\n    raw = await platform.getRawFile(fileName, repo, tag ?? undefined);\n  } catch (err) {\n    if (err instanceof ExternalHostError) {\n      throw err;\n    }\n\n    logger.debug(\n      `Preset file ${fileName} not found in ${repo}: ${err.message}}`,\n    );\n\n    throw new Error(PRESET_DEP_NOT_FOUND);\n  }\n\n  if (!raw) {\n    throw new Error(PRESET_DEP_NOT_FOUND);\n  }\n\n  return parsePreset(raw, fileName);\n}\n\nexport function getPresetFromEndpoint(\n  repo: string,\n  filePreset: string,\n  presetPath: string | undefined,\n  endpoint: string,\n  tag?: string,\n): Promise<Preset | undefined> {\n  return fetchPreset({\n    repo,\n    filePreset,\n    presetPath,\n    endpoint,\n    tag,\n    fetch: fetchJSONFile,\n  });\n}\n"]}