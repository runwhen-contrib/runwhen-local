{"version":3,"file":"sort.js","sourceRoot":"","sources":["../../../../lib/workers/repository/process/sort.ts"],"names":[],"mappings":";;AAGA,oCAkCC;AArCD,4CAAyC;AAGzC,SAAgB,YAAY,CAAC,QAAiC;IAC5D,gBAAgB;IAChB,MAAM,SAAS,GAAG;QAChB,KAAK;QACL,QAAQ;QACR,OAAO;QACP,OAAO;QACP,OAAO;QACP,qBAAqB;KACtB,CAAC;IACF,eAAM,CAAC,KAAK,CAAC,EAAE,QAAQ,EAAE,EAAE,UAAU,CAAC,CAAC;IACvC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;QACrB,IAAI,CAAC,CAAC,oBAAoB,IAAI,CAAC,CAAC,CAAC,oBAAoB,EAAE,CAAC;YACtD,OAAO,CAAC,CAAC,CAAC;QACZ,CAAC;QACD,IAAI,CAAC,CAAC,CAAC,oBAAoB,IAAI,CAAC,CAAC,oBAAoB,EAAE,CAAC;YACtD,OAAO,CAAC,CAAC;QACX,CAAC;QAED,cAAc;QACd,MAAM,cAAc,GAAG,aAAa,CAAC,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;QAC3D,IAAI,cAAc,KAAK,CAAC,EAAE,CAAC;YACzB,OAAO,cAAc,CAAC;QACxB,CAAC;QACD,cAAc;QACd,MAAM,QAAQ,GACZ,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,UAAW,CAAC,GAAG,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,UAAW,CAAC,CAAC;QACtE,IAAI,QAAQ,KAAK,CAAC,EAAE,CAAC;YACnB,OAAO,QAAQ,CAAC;QAClB,CAAC;QACD,cAAc;QACd,4CAA4C;QAC5C,OAAO,CAAC,CAAC,OAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,OAAQ,EAAE,SAAS,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;IAC5E,CAAC,CAAC,CAAC;AACL,CAAC;AAED,SAAS,aAAa,CAAC,MAA6B;IAClD,OAAO,MAAM,CAAC,UAAU,IAAI,CAAC,CAAC;AAChC,CAAC","sourcesContent":["import { logger } from '../../../logger';\nimport type { BranchConfig } from '../../types';\n\nexport function sortBranches(branches: Partial<BranchConfig>[]): void {\n  // Sort branches\n  const sortOrder = [\n    'pin',\n    'digest',\n    'patch',\n    'minor',\n    'major',\n    'lockFileMaintenance',\n  ];\n  logger.trace({ branches }, 'branches');\n  branches.sort((a, b) => {\n    if (a.isVulnerabilityAlert && !b.isVulnerabilityAlert) {\n      return -1;\n    }\n    if (!a.isVulnerabilityAlert && b.isVulnerabilityAlert) {\n      return 1;\n    }\n\n    // TODO #22198\n    const prPriorityDiff = getPrPriority(b) - getPrPriority(a);\n    if (prPriorityDiff !== 0) {\n      return prPriorityDiff;\n    }\n    // TODO #22198\n    const sortDiff =\n      sortOrder.indexOf(a.updateType!) - sortOrder.indexOf(b.updateType!);\n    if (sortDiff !== 0) {\n      return sortDiff;\n    }\n    // TODO #22198\n    // Sort by prTitle if updateType is the same\n    return a.prTitle!.localeCompare(b.prTitle!, undefined, { numeric: true });\n  });\n}\n\nfunction getPrPriority(branch: Partial<BranchConfig>): number {\n  return branch.prPriority ?? 0;\n}\n"]}