{"version":3,"file":"commit-message.js","sourceRoot":"","sources":["../../../../../lib/workers/repository/config-migration/branch/commit-message.ts"],"names":[],"mappings":";;;;AACA,4EAAsD;AAEtD,+EAA0E;AAE1E,MAAa,mCAAmC;IAE3B;IACA;IAFnB,YACmB,MAAsB,EACtB,UAAkB;QADlB,WAAM,GAAN,MAAM,CAAgB;QACtB,eAAU,GAAV,UAAU,CAAQ;IAClC,CAAC;IAEI,MAAM,CAAC,kBAA0B;QACvC,MAAM,EAAE,aAAa,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC;QAEtC,MAAM,MAAM,GAAG;YACb,GAAG,IAAI,CAAC,MAAM;YACd,mBAAmB,EAAE,QAAQ;YAC7B,kBAAkB,EAAE,EAAE;YACtB,mBAAmB,EAAE,EAAE;YACvB,kBAAkB;SACnB,CAAC;QAEF,MAAM,oBAAoB,GAAG,IAAI,6CAAoB,CAAC,MAAM,CAAC,CAAC;QAC9D,MAAM,MAAM,GAAG,oBAAoB,CAAC,MAAM,EAAE,CAAC;QAE7C,IAAI,aAAa,EAAE,CAAC;YAClB,MAAM,CAAC,mBAAmB,GAAG,EAAE,CAAC;YAChC,MAAM,CAAC,OAAO,GAAG,QAAQ,CAAC,OAAO,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;QAC3D,CAAC;aAAM,CAAC;YACN,MAAM,CAAC,OAAO,GAAG,kBAAkB,CAAC;QACtC,CAAC;QAED,OAAO,MAAM,CAAC;IAChB,CAAC;IAED,gBAAgB;QACd,OAAO,IAAI,CAAC,MAAM,CAAC,kBAAkB,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,QAAQ,EAAE,CAAC;IACrE,CAAC;IAED,UAAU;QACR,OAAO,IAAI,CAAC,MAAM,CAAC,yBAAyB,CAAC,CAAC,QAAQ,EAAE,CAAC;IAC3D,CAAC;CACF;AArCD,kFAqCC","sourcesContent":["import type { RenovateConfig } from '../../../../config/types';\nimport * as template from '../../../../util/template';\nimport type { CommitMessage } from '../../model/commit-message';\nimport { CommitMessageFactory } from '../../model/commit-message-factory';\n\nexport class ConfigMigrationCommitMessageFactory {\n  constructor(\n    private readonly config: RenovateConfig,\n    private readonly configFile: string,\n  ) {}\n\n  private create(commitMessageTopic: string): CommitMessage {\n    const { commitMessage } = this.config;\n\n    const config = {\n      ...this.config,\n      semanticCommitScope: 'config',\n      commitMessageExtra: '',\n      commitMessageAction: '',\n      commitMessageTopic,\n    };\n\n    const commitMessageFactory = new CommitMessageFactory(config);\n    const commit = commitMessageFactory.create();\n\n    if (commitMessage) {\n      config.commitMessagePrefix = '';\n      commit.subject = template.compile(commitMessage, config);\n    } else {\n      commit.subject = commitMessageTopic;\n    }\n\n    return commit;\n  }\n\n  getCommitMessage(): string {\n    return this.create(`Migrate config ${this.configFile}`).toString();\n  }\n\n  getPrTitle(): string {\n    return this.create(`Migrate renovate config`).toString();\n  }\n}\n"]}