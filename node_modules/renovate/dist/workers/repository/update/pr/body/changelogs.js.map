{"version":3,"file":"changelogs.js","sourceRoot":"","sources":["../../../../../../lib/workers/repository/update/pr/body/changelogs.ts"],"names":[],"mappings":";;AAOA,sCAqBC;;AA5BD,qDAAsD;AACtD,2DAAgE;AAChE,qDAAkD;AAClD,+EAAyD;AAEzD,qFAAwD;AAExD,SAAgB,aAAa,CAAC,MAAoB;IAChD,IAAI,YAAY,GAAG,EAAE,CAAC;IACtB,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC;QAC5B,OAAO,YAAY,CAAC;IACtB,CAAC;IAED,KAAK,MAAM,OAAO,IAAI,MAAM,CAAC,QAAQ,EAAE,CAAC;QACtC,IAAI,OAAO,CAAC,eAAe,IAAI,OAAO,CAAC,QAAQ,EAAE,CAAC;YAChD,OAAO,CAAC,wBAAwB,GAAG,GACjC,OAAO,CAAC,QACV,KAAK,OAAO,CAAC,OAAQ,GAAG,CAAC;QAC3B,CAAC;IACH,CAAC;IAED,YAAY;QACV,aAAa,GAAG,QAAQ,CAAC,OAAO,CAAC,sBAAe,EAAE,MAAM,EAAE,KAAK,CAAC,GAAG,MAAM,CAAC;IAC5E,YAAY,GAAG,YAAY,CAAC,OAAO,CAAC,IAAA,aAAK,EAAC,YAAY,CAAC,EAAE,SAAS,CAAC,CAAC;IACpE,YAAY,GAAG,IAAA,2BAAgB,EAAC,YAAY,CAAC,CAAC;IAC9C,YAAY,GAAG,IAAA,iBAAS,EAAC,YAAY,CAAC,CAAC;IAEvC,OAAO,YAAY,CAAC;AACtB,CAAC","sourcesContent":["import { unemojify } from '../../../../../util/emoji';\nimport { sanitizeMarkdown } from '../../../../../util/markdown';\nimport { regEx } from '../../../../../util/regex';\nimport * as template from '../../../../../util/template';\nimport type { BranchConfig } from '../../../../types';\nimport releaseNotesHbs from '../changelog/hbs-template';\n\nexport function getChangelogs(config: BranchConfig): string {\n  let releaseNotes = '';\n  if (!config.hasReleaseNotes) {\n    return releaseNotes;\n  }\n\n  for (const upgrade of config.upgrades) {\n    if (upgrade.hasReleaseNotes && upgrade.repoName) {\n      upgrade.releaseNotesSummaryTitle = `${\n        upgrade.repoName\n      } (${upgrade.depName!})`;\n    }\n  }\n\n  releaseNotes +=\n    '\\n\\n---\\n\\n' + template.compile(releaseNotesHbs, config, false) + '\\n\\n';\n  releaseNotes = releaseNotes.replace(regEx(/### \\[`vv/g), '### [`v');\n  releaseNotes = sanitizeMarkdown(releaseNotes);\n  releaseNotes = unemojify(releaseNotes);\n\n  return releaseNotes;\n}\n"]}