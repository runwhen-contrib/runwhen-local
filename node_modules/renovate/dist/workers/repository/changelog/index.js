"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.embedChangelog = embedChangelog;
exports.embedChangelogs = embedChangelogs;
const tslib_1 = require("tslib");
const p = tslib_1.__importStar(require("../../../util/promises"));
const changelog_1 = require("../update/pr/changelog");
async function embedChangelog(upgrade) {
    // getChangeLogJSON returns null on error, so don't try again
    if (upgrade.logJSON !== undefined) {
        return;
    }
    upgrade.logJSON = await (0, changelog_1.getChangeLogJSON)(upgrade);
}
async function embedChangelogs(branches) {
    await p.map(branches, embedChangelog, { concurrency: 10 });
}
//# sourceMappingURL=index.js.map