{"version":3,"file":"cache.js","sourceRoot":"","sources":["../../../../lib/workers/repository/init/cache.ts"],"names":[],"mappings":";;AAQA,kCAIC;AAED,4CAOC;;AArBD,gEAA0B;AAC1B,gFAA0D;AAC1D,6EAAuD;AACvD,wFAAkE;AAClE,8DAAoE;AACpE,yCAAmD;AAG5C,KAAK,UAAU,WAAW;IAC/B,QAAQ,CAAC,KAAK,EAAE,CAAC;IACjB,eAAe,CAAC,UAAU,EAAE,CAAC;IAC7B,MAAM,kBAAE,CAAC,MAAM,CAAC,IAAA,oBAAe,GAAE,CAAC,CAAC;AACrC,CAAC;AAEM,KAAK,UAAU,gBAAgB,CACpC,MAA4B;IAE5B,MAAM,IAAA,oBAAa,EAAC,MAAM,CAAC,CAAC;IAC5B,MAAM,kBAAE,CAAC,SAAS,CAAC,IAAA,oBAAe,GAAE,CAAC,CAAC;IACtC,MAAM,CAAC,QAAQ,EAAE,CAAC;IAClB,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;AAChC,CAAC","sourcesContent":["import fs from 'fs-extra';\nimport * as npmApi from '../../../modules/datasource/npm';\nimport * as memCache from '../../../util/cache/memory';\nimport * as repositoryCache from '../../../util/cache/repository';\nimport { initRepoCache } from '../../../util/cache/repository/init';\nimport { privateCacheDir } from '../../../util/fs';\nimport type { WorkerPlatformConfig } from './apis';\n\nexport async function resetCaches(): Promise<void> {\n  memCache.reset();\n  repositoryCache.resetCache();\n  await fs.remove(privateCacheDir());\n}\n\nexport async function initializeCaches(\n  config: WorkerPlatformConfig,\n): Promise<void> {\n  await initRepoCache(config);\n  await fs.ensureDir(privateCacheDir());\n  npmApi.setNpmrc();\n  npmApi.setNpmrc(config.npmrc);\n}\n"]}