{"version":3,"file":"pr-body.js","sourceRoot":"","sources":["../../../../lib/modules/platform/utils/pr-body.ts"],"names":[],"mappings":";;AAOA,sCAyBC;AAhCD,+CAA4C;AAE5C,MAAM,EAAE,GAAG,IAAA,aAAK,EACd,sFAAsF,EACtF,GAAG,CACJ,CAAC;AAEF,SAAgB,aAAa,CAAC,KAAa,EAAE,GAAW;IACtD,IAAI,KAAK,CAAC,MAAM,GAAG,GAAG,EAAE,CAAC;QACvB,OAAO,KAAK,CAAC;IACf,CAAC;IAED,MAAM,OAAO,GAAG,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC/B,IAAI,CAAC,OAAO,EAAE,MAAM,EAAE,CAAC;QACrB,OAAO,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;IACjC,CAAC;IAED,MAAM,OAAO,GAAG,4CAA4C,CAAC;IAC7D,MAAM,QAAQ,GAAG,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC;IACzC,MAAM,YAAY,GAAG,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC;IACjD,MAAM,SAAS,GAAG,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC;IAE3C,MAAM,eAAe,GACnB,GAAG,GAAG,CAAC,QAAQ,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;IAE9D,IAAI,eAAe,IAAI,CAAC,EAAE,CAAC;QACzB,OAAO,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;IACjC,CAAC;SAAM,CAAC;QACN,OAAO,CACL,QAAQ,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE,eAAe,CAAC,GAAG,OAAO,GAAG,SAAS,CACxE,CAAC;IACJ,CAAC;AACH,CAAC","sourcesContent":["import { regEx } from '../../../util/regex';\n\nconst re = regEx(\n  `(?<preNotes>.*### Release Notes)(?<releaseNotes>.*)### Configuration(?<postNotes>.*)`,\n  's',\n);\n\nexport function smartTruncate(input: string, len: number): string {\n  if (input.length < len) {\n    return input;\n  }\n\n  const reMatch = re.exec(input);\n  if (!reMatch?.groups) {\n    return input.substring(0, len);\n  }\n\n  const divider = `\\n\\n</details>\\n\\n---\\n\\n### Configuration`;\n  const preNotes = reMatch.groups.preNotes;\n  const releaseNotes = reMatch.groups.releaseNotes;\n  const postNotes = reMatch.groups.postNotes;\n\n  const availableLength =\n    len - (preNotes.length + postNotes.length + divider.length);\n\n  if (availableLength <= 0) {\n    return input.substring(0, len);\n  } else {\n    return (\n      preNotes + releaseNotes.slice(0, availableLength) + divider + postNotes\n    );\n  }\n}\n"]}