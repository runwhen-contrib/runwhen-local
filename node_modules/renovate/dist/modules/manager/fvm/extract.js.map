{"version":3,"file":"extract.js","sourceRoot":"","sources":["../../../../lib/modules/manager/fvm/extract.ts"],"names":[],"mappings":";;AAMA,gDA4BC;AAlCD,4CAAyC;AACzC,6DAAkD;AAClD,sEAA4E;AAE5E,qCAAqC;AAErC,SAAgB,kBAAkB,CAChC,OAAe,EACf,WAAmB;IAEnB,IAAI,cAAkC,CAAC;IACvC,IAAI,CAAC;QACH,MAAM,MAAM,GAAG,mBAAI,CAAC,IAAI,CAAC,kBAAS,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACnD,cAAc,GAAG,MAAM,CAAC,OAAO,IAAI,MAAM,CAAC,iBAAiB,CAAC;QAE5D,IAAI,CAAC,cAAc,EAAE,CAAC;YACpB,eAAM,CAAC,KAAK,CACV,EAAE,QAAQ,EAAE,MAAM,EAAE,EACpB,sDAAsD,CACvD,CAAC;YACF,OAAO,IAAI,CAAC;QACd,CAAC;IACH,CAAC;IAAC,OAAO,GAAG,EAAE,CAAC;QACb,eAAM,CAAC,KAAK,CAAC,EAAE,WAAW,EAAE,GAAG,EAAE,EAAE,oBAAoB,CAAC,CAAC;QACzD,OAAO,IAAI,CAAC;IACd,CAAC;IAED,MAAM,GAAG,GAAsB;QAC7B,OAAO,EAAE,SAAS;QAClB,YAAY,EAAE,cAAc;QAC5B,UAAU,EAAE,0CAAwB,CAAC,EAAE;QACvC,WAAW,EAAE,iBAAiB;KAC/B,CAAC;IACF,OAAO,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;AACzB,CAAC","sourcesContent":["import { logger } from '../../../logger';\nimport { Json } from '../../../util/schema-utils';\nimport { FlutterVersionDatasource } from '../../datasource/flutter-version';\nimport type { PackageDependency, PackageFileContent } from '../types';\nimport { FvmConfig } from './schema';\n\nexport function extractPackageFile(\n  content: string,\n  packageFile: string,\n): PackageFileContent | null {\n  let flutterVersion: string | undefined;\n  try {\n    const config = Json.pipe(FvmConfig).parse(content);\n    flutterVersion = config.flutter ?? config.flutterSdkVersion;\n\n    if (!flutterVersion) {\n      logger.debug(\n        { contents: config },\n        'FVM config does not have a flutter version specified',\n      );\n      return null;\n    }\n  } catch (err) {\n    logger.debug({ packageFile, err }, 'Invalid FVM config');\n    return null;\n  }\n\n  const dep: PackageDependency = {\n    depName: 'flutter',\n    currentValue: flutterVersion,\n    datasource: FlutterVersionDatasource.id,\n    packageName: 'flutter/flutter',\n  };\n  return { deps: [dep] };\n}\n"]}