{"version":3,"file":"update.js","sourceRoot":"","sources":["../../../../lib/modules/manager/sbt/update.ts"],"names":[],"mappings":";;AAMA,gDA2BC;;AAhCD,4DAA4B;AAC5B,4CAAyC;AACzC,+CAA4C;AAG5C,SAAgB,kBAAkB,CAChC,OAAe,EACf,YAAoB,EACpB,WAAwB;IAExB,eAAM,CAAC,KAAK,CACV,EAAE,WAAW,EAAE,YAAY,EAAE,EAC7B,8CAA8C,CAC/C,CAAC;IACF,IAAI,aAAa,GAAG,OAAO,CAAC;IAC5B,MAAM,aAAa,GAAG,gBAAM,CAAC,GAAG,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;IAC5D,IAAI,CAAC,aAAa,EAAE,CAAC;QACnB,eAAM,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC;QAC1C,OAAO,EAAE,aAAa,EAAE,CAAC;IAC3B,CAAC;IACD,aAAa,GAAG,OAAO,CAAC,OAAO,CAC7B,IAAA,aAAK,EAAC,wBAAwB,CAAC,EAC/B,MAAM,aAAa,GAAG,CACvB,CAAC;IAEF,IAAI,aAAa,KAAK,OAAO,EAAE,CAAC;QAC9B,eAAM,CAAC,KAAK,CAAC,4BAA4B,CAAC,CAAC;IAC7C,CAAC;SAAM,CAAC;QACN,eAAM,CAAC,KAAK,CAAC,+BAA+B,aAAa,EAAE,CAAC,CAAC;IAC/D,CAAC;IAED,OAAO,EAAE,aAAa,EAAE,CAAC;AAC3B,CAAC","sourcesContent":["import type { ReleaseType } from 'semver';\nimport semver from 'semver';\nimport { logger } from '../../../logger';\nimport { regEx } from '../../../util/regex';\nimport type { BumpPackageVersionResult } from '../types';\n\nexport function bumpPackageVersion(\n  content: string,\n  currentValue: string,\n  bumpVersion: ReleaseType,\n): BumpPackageVersionResult {\n  logger.debug(\n    { bumpVersion, currentValue },\n    'Checking if we should bump build.sbt version',\n  );\n  let bumpedContent = content;\n  const bumpedVersion = semver.inc(currentValue, bumpVersion);\n  if (!bumpedVersion) {\n    logger.warn('Version incremental failed');\n    return { bumpedContent };\n  }\n  bumpedContent = content.replace(\n    regEx(/^(version\\s*:=\\s*).*$/m),\n    `$1\"${bumpedVersion}\"`,\n  );\n\n  if (bumpedContent === content) {\n    logger.debug('Version was already bumped');\n  } else {\n    logger.debug(`Bumped build.sbt version to ${bumpedVersion}`);\n  }\n\n  return { bumpedContent };\n}\n"]}