{"version":3,"file":"common.js","sourceRoot":"","sources":["../../../../lib/modules/manager/flux/common.ts"],"names":[],"mappings":";;;AASA,4CAEC;AAED,4CAcC;AA3BD,+CAA4C;AAI/B,QAAA,2BAA2B,GAAG,iCAAiC,CAAC;AAEhE,QAAA,yBAAyB,GACpC,2EAA2E,CAAC;AAE9E,SAAgB,gBAAgB,CAAC,IAAY;IAC3C,OAAO,IAAA,aAAK,EAAC,mCAA2B,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACvD,CAAC;AAED,SAAgB,gBAAgB,CAAC,SAAyB;IACxD,MAAM,gBAAgB,GAAqB,EAAE,CAAC;IAE9C,KAAK,MAAM,QAAQ,IAAI,SAAS,EAAE,CAAC;QACjC,IAAI,QAAQ,CAAC,IAAI,KAAK,UAAU,EAAE,CAAC;YACjC,KAAK,MAAM,QAAQ,IAAI,QAAQ,CAAC,SAAS,EAAE,CAAC;gBAC1C,IAAI,QAAQ,CAAC,IAAI,KAAK,gBAAgB,EAAE,CAAC;oBACvC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAClC,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IAED,OAAO,gBAAgB,CAAC;AAC1B,CAAC","sourcesContent":["import { regEx } from '../../../util/regex';\nimport type { HelmRepository } from './schema';\nimport type { FluxManifest } from './types';\n\nexport const systemManifestFileNameRegex = '(?:^|/)gotk-components\\\\.ya?ml$';\n\nexport const systemManifestHeaderRegex =\n  '#\\\\s*Flux\\\\s+Version:\\\\s*(\\\\S+)(?:\\\\s*#\\\\s*Components:\\\\s*([A-Za-z,-]+))?';\n\nexport function isSystemManifest(file: string): boolean {\n  return regEx(systemManifestFileNameRegex).test(file);\n}\n\nexport function collectHelmRepos(manifests: FluxManifest[]): HelmRepository[] {\n  const helmRepositories: HelmRepository[] = [];\n\n  for (const manifest of manifests) {\n    if (manifest.kind === 'resource') {\n      for (const resource of manifest.resources) {\n        if (resource.kind === 'HelmRepository') {\n          helmRepositories.push(resource);\n        }\n      }\n    }\n  }\n\n  return helmRepositories;\n}\n"]}