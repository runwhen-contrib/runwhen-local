{"version":3,"file":"extract.js","sourceRoot":"","sources":["../../../../lib/modules/manager/copier/extract.ts"],"names":[],"mappings":";;AAKA,gDAyBC;AA9BD,4CAAyC;AACzC,wDAA8D;AAE9D,qCAA6C;AAE7C,SAAgB,kBAAkB,CAChC,OAAe,EACf,WAAoB;IAEpB,IAAI,MAAyB,CAAC;IAC9B,IAAI,CAAC;QACH,MAAM,GAAG,0BAAiB,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;IAC5C,CAAC;IAAC,OAAO,GAAG,EAAE,CAAC;QACb,eAAM,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,WAAW,EAAE,EAAE,oCAAoC,CAAC,CAAC;QACzE,OAAO,IAAI,CAAC;IACd,CAAC;IAED,MAAM,IAAI,GAAwB;QAChC;YACE,UAAU,EAAE,4BAAiB,CAAC,EAAE;YAChC,OAAO,EAAE,MAAM,CAAC,SAAS;YACzB,WAAW,EAAE,MAAM,CAAC,SAAS;YAC7B,OAAO,EAAE,UAAU;YACnB,YAAY,EAAE,MAAM,CAAC,OAAO;SAC7B;KACF,CAAC;IAEF,OAAO;QACL,IAAI;KACL,CAAC;AACJ,CAAC","sourcesContent":["import { logger } from '../../../logger';\nimport { GitTagsDatasource } from '../../datasource/git-tags';\nimport type { PackageDependency, PackageFileContent } from '../types';\nimport { CopierAnswersFile } from './schema';\n\nexport function extractPackageFile(\n  content: string,\n  packageFile?: string,\n): PackageFileContent | null {\n  let parsed: CopierAnswersFile;\n  try {\n    parsed = CopierAnswersFile.parse(content);\n  } catch (err) {\n    logger.debug({ err, packageFile }, `Parsing Copier answers YAML failed`);\n    return null;\n  }\n\n  const deps: PackageDependency[] = [\n    {\n      datasource: GitTagsDatasource.id,\n      depName: parsed._src_path,\n      packageName: parsed._src_path,\n      depType: 'template',\n      currentValue: parsed._commit,\n    },\n  ];\n\n  return {\n    deps,\n  };\n}\n"]}