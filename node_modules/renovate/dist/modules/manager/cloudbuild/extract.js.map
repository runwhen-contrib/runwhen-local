{"version":3,"file":"extract.js","sourceRoot":"","sources":["../../../../lib/modules/manager/cloudbuild/extract.ts"],"names":[],"mappings":";;AAKA,gDAmBC;AAxBD,4CAAyC;AACzC,mDAA+C;AAE/C,qCAA2C;AAE3C,SAAgB,kBAAkB,CAChC,OAAe,EACf,WAAoB;IAEpB,MAAM,IAAI,GAAG,wBAAe,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,EAAE,EAAE;QACpD,eAAM,CAAC,KAAK,CACV,EAAE,GAAG,EAAE,WAAW,EAAE,EACpB,wEAAwE,CACzE,CAAC;QACF,OAAO,EAAE,CAAC;IACZ,CAAC,CAAC;SACC,SAAS,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAA,gBAAM,EAAC,IAAI,CAAC,CAAC,CAAC;SACvD,KAAK,CAAC,OAAO,CAAC,CAAC;IAElB,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;QACjB,OAAO,IAAI,CAAC;IACd,CAAC;IAED,OAAO,EAAE,IAAI,EAAE,CAAC;AAClB,CAAC","sourcesContent":["import { logger } from '../../../logger';\nimport { getDep } from '../dockerfile/extract';\nimport type { PackageFileContent } from '../types';\nimport { CloudbuildSteps } from './schema';\n\nexport function extractPackageFile(\n  content: string,\n  packageFile?: string,\n): PackageFileContent | null {\n  const deps = CloudbuildSteps.catch(({ error: err }) => {\n    logger.debug(\n      { err, packageFile },\n      'Cloud Build: error extracting Docker images from a configuration file.',\n    );\n    return [];\n  })\n    .transform((steps) => steps.map((step) => getDep(step)))\n    .parse(content);\n\n  if (!deps.length) {\n    return null;\n  }\n\n  return { deps };\n}\n"]}