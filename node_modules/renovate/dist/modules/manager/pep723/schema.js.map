{"version":3,"file":"schema.js","sourceRoot":"","sources":["../../../../lib/modules/manager/pep723/schema.ts"],"names":[],"mappings":";;;;AAAA,kEAAkC;AAClC,6BAAwB;AACxB,6DAAkD;AAClD,2CAAsE;AAGtE,MAAM,SAAS,GAAG,OAAC;KAChB,MAAM,EAAE;KACR,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,IAAA,iCAAyB,EAAC,gBAAQ,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC,CAAC;AAEhE,QAAA,YAAY,GAAG,mBAAI,CAAC,IAAI,CACnC,OAAC;KACE,MAAM,CAAC;IACN,iBAAiB,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IACxC,YAAY,EAAE,OAAC;SACZ,KAAK,CAAC,SAAS,CAAC;SAChB,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;SAChD,QAAQ,EAAE;CACd,CAAC;KACD,SAAS,CAAC,CAAC,EAAE,iBAAiB,EAAE,cAAc,EAAE,YAAY,EAAE,EAAE,EAAE;IACjE,MAAM,GAAG,GAAuB,EAAE,IAAI,EAAE,YAAY,IAAI,EAAE,EAAE,CAAC;IAE7D,IAAI,YAAE,CAAC,cAAc,CAAC,cAAc,CAAC,EAAE,CAAC;QACtC,GAAG,CAAC,oBAAoB,GAAG,EAAE,MAAM,EAAE,cAAc,EAAE,CAAC;IACxD,CAAC;IAED,OAAO,GAAG,CAAC;AACb,CAAC,CAAC,CACL,CAAC","sourcesContent":["import is from '@sindresorhus/is';\nimport { z } from 'zod';\nimport { Toml } from '../../../util/schema-utils';\nimport { depTypes, pep508ToPackageDependency } from '../pep621/utils';\nimport type { PackageFileContent } from '../types';\n\nconst Pep723Dep = z\n  .string()\n  .transform((dep) => pep508ToPackageDependency(depTypes.dependencies, dep));\n\nexport const Pep723Schema = Toml.pipe(\n  z\n    .object({\n      'requires-python': z.string().optional(),\n      dependencies: z\n        .array(Pep723Dep)\n        .transform((deps) => deps.filter((dep) => !!dep))\n        .optional(),\n    })\n    .transform(({ 'requires-python': requiresPython, dependencies }) => {\n      const res: PackageFileContent = { deps: dependencies ?? [] };\n\n      if (is.nonEmptyString(requiresPython)) {\n        res.extractedConstraints = { python: requiresPython };\n      }\n\n      return res;\n    }),\n);\n"]}