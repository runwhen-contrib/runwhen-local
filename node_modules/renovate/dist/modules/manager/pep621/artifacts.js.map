{"version":3,"file":"artifacts.js","sourceRoot":"","sources":["../../../../lib/modules/manager/pep621/artifacts.ts"],"names":[],"mappings":";;AAMA,0CA+BC;;AArCD,kEAAkC;AAClC,yCAAkD;AAElD,6CAA0C;AAC1C,mCAAyC;AAElC,KAAK,UAAU,eAAe,CACnC,cAA8B;IAE9B,MAAM,EAAE,eAAe,EAAE,qBAAqB,EAAE,GAAG,cAAc,CAAC;IAElE,MAAM,IAAA,mBAAc,EAAC,eAAe,EAAE,qBAAqB,CAAC,CAAC;IAE7D,MAAM,OAAO,GAAG,IAAA,sBAAc,EAAC,eAAe,EAAE,qBAAqB,CAAC,CAAC;IACvE,IAAI,YAAE,CAAC,eAAe,CAAC,OAAO,CAAC,EAAE,CAAC;QAChC,OAAO;YACL;gBACE,aAAa,EAAE;oBACb,MAAM,EAAE,0CAA0C;iBACnD;aACF;SACF,CAAC;IACJ,CAAC;IAED,6BAA6B;IAC7B,MAAM,MAAM,GAA4B,EAAE,CAAC;IAC3C,KAAK,MAAM,SAAS,IAAI,uBAAU,EAAE,CAAC;QACnC,MAAM,eAAe,GAAG,MAAM,SAAS,CAAC,eAAe,CACrD,cAAc,EACd,OAAO,CACR,CAAC;QACF,IAAI,YAAE,CAAC,KAAK,CAAC,eAAe,CAAC,EAAE,CAAC;YAC9B,MAAM,CAAC,IAAI,CAAC,GAAG,eAAe,CAAC,CAAC;QAClC,CAAC;IACH,CAAC;IAED,OAAO,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC;AAC3C,CAAC","sourcesContent":["import is from '@sindresorhus/is';\nimport { writeLocalFile } from '../../../util/fs';\nimport type { UpdateArtifact, UpdateArtifactsResult } from '../types';\nimport { processors } from './processors';\nimport { parsePyProject } from './utils';\n\nexport async function updateArtifacts(\n  updateArtifact: UpdateArtifact,\n): Promise<UpdateArtifactsResult[] | null> {\n  const { packageFileName, newPackageFileContent } = updateArtifact;\n\n  await writeLocalFile(packageFileName, newPackageFileContent);\n\n  const project = parsePyProject(packageFileName, newPackageFileContent);\n  if (is.nullOrUndefined(project)) {\n    return [\n      {\n        artifactError: {\n          stderr: 'Failed to parse new package file content',\n        },\n      },\n    ];\n  }\n\n  // process specific tool sets\n  const result: UpdateArtifactsResult[] = [];\n  for (const processor of processors) {\n    const artifactUpdates = await processor.updateArtifacts(\n      updateArtifact,\n      project,\n    );\n    if (is.array(artifactUpdates)) {\n      result.push(...artifactUpdates);\n    }\n  }\n\n  return result.length > 0 ? result : null;\n}\n"]}