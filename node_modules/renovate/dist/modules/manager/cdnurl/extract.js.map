{"version":3,"file":"extract.js","sourceRoot":"","sources":["../../../../lib/modules/manager/cdnurl/extract.ts"],"names":[],"mappings":";;;AAQA,gDAsBC;AA9BD,+CAA4C;AAC5C,kDAAyD;AAG5C,QAAA,kBAAkB,GAAG,IAAA,aAAK,EACrC,iHAAiH,CAClH,CAAC;AAEF,SAAgB,kBAAkB,CAAC,OAAe;IAChD,MAAM,IAAI,GAAwB,EAAE,CAAC;IAErC,IAAI,IAAI,GAAG,OAAO,CAAC;IACnB,IAAI,KAAK,GAAG,0BAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1C,IAAI,MAAM,GAAG,CAAC,CAAC;IACf,OAAO,KAAK,EAAE,MAAM,EAAE,CAAC;QACrB,MAAM,CAAC,WAAW,CAAC,GAAG,KAAK,CAAC;QAC5B,MAAM,EAAE,OAAO,EAAE,YAAY,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC;QACtD,MAAM,IAAI,KAAK,CAAC,KAAK,GAAG,WAAW,CAAC,MAAM,CAAC;QAC3C,IAAI,GAAG,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QAC7B,KAAK,GAAG,0BAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEtC,IAAI,CAAC,IAAI,CAAC;YACR,UAAU,EAAE,uBAAe,CAAC,EAAE;YAC9B,OAAO;YACP,WAAW,EAAE,GAAG,OAAO,IAAI,KAAK,EAAE;YAClC,YAAY;SACb,CAAC,CAAC;IACL,CAAC;IAED,OAAO,EAAE,IAAI,EAAE,CAAC;AAClB,CAAC","sourcesContent":["import { regEx } from '../../../util/regex';\nimport { CdnjsDatasource } from '../../datasource/cdnjs';\nimport type { PackageDependency, PackageFileContent } from '../types';\n\nexport const cloudflareUrlRegex = regEx(\n  /\\/\\/cdnjs\\.cloudflare\\.com\\/ajax\\/libs\\/(?<depName>[^/]+?)\\/(?<currentValue>[^/]+?)\\/(?<asset>[-/_.a-zA-Z0-9]+)/,\n);\n\nexport function extractPackageFile(content: string): PackageFileContent {\n  const deps: PackageDependency[] = [];\n\n  let rest = content;\n  let match = cloudflareUrlRegex.exec(rest);\n  let offset = 0;\n  while (match?.groups) {\n    const [wholeSubstr] = match;\n    const { depName, currentValue, asset } = match.groups;\n    offset += match.index + wholeSubstr.length;\n    rest = content.slice(offset);\n    match = cloudflareUrlRegex.exec(rest);\n\n    deps.push({\n      datasource: CdnjsDatasource.id,\n      depName,\n      packageName: `${depName}/${asset}`,\n      currentValue,\n    });\n  }\n\n  return { deps };\n}\n"]}