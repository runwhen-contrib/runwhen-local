{"version":3,"file":"objects.js","sourceRoot":"","sources":["../../../../../lib/modules/manager/gradle/parser/objects.ts"],"names":[],"mappings":";;;AACA,2DAAgD;AAEhD,+CAA+D;AAC/D,qCAUkB;AAClB,iDAAoD;AACpD,yCAA8C;AAE9C,MAAM,uBAAuB,GAAG,0BAAC,CAAC,GAAG,CAAM,QAAQ,CAAC,CAAC,IAAI,CAAC;IACxD,IAAI,EAAE,cAAc;IACpB,UAAU,EAAE,GAAG;IACf,QAAQ,EAAE,GAAG;IACb,MAAM,EAAE,iCAAkB;CAC3B,CAAC,CAAC;AAEH,MAAM,gCAAgC,GAAG,0BAAC,CAAC,GAAG;AAC5C,uDAAuD;AACvD,4CAA8B,EAC9B,sCAA6B;KAC1B,GAAG,CAAC,0BAAC,CAAC,EAAE,CAAM,GAAG,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;KACjC,EAAE,CAAC,GAAG,CAAC;KACP,OAAO,CAAC,4BAAmB,CAAC;KAC5B,OAAO,CAAC,yBAAgB,CAAC;KACzB,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,IAAA,wBAAe,EAAC,GAAG,EAAE,UAAU,CAAC,CAAC;KAClD,GAAG;AACF,2GAA2G;AAC3G,uBAAuB;AACvB,8CAA8C;AAC9C,sBAAa;KACV,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,IAAA,wBAAe,EAAC,GAAG,EAAE,UAAU,CAAC,CAAC;KAClD,OAAO,CAAC,2BAAgB,CAAC,CAC7B;KACA,OAAO,CAAC,wBAAe,CAAC,CAC5B,CAAC;AAEF,qBAAqB;AACrB,MAAM,sBAAsB,GAAG,CAC7B,MAAwC,EACN,EAAE,CACpC,0BAAC,CAAC,GAAG,CACH,0BAAC,CAAC,GAAG,CAAM,QAAQ,CAAC,CAAC,GAAG,CAAC,sBAAa,CAAC,CAAC,IAAI,CAAC;IAC3C,IAAI,EAAE,cAAc;IACpB,QAAQ,EAAE,CAAC;IACX,UAAU,EAAE,GAAG;IACf,QAAQ,EAAE,GAAG;IACb,UAAU,EAAE,6BAAoB;IAChC,MAAM;IACN,WAAW,EAAE,2BAAkB;CAChC,CAAC,EACF,gCAAgC,CACjC,CAAC;AAES,QAAA,+BAA+B,GAAG,sBAAsB,CACnE,sBAAsB,CACpB,sBAAsB,CACpB,sBAAsB,CAAC,gCAAgC,CAAC,CACzD,CACF,CACF,CAAC,OAAO,CAAC,wBAAe,CAAC,CAAC","sourcesContent":["import type { parser } from 'good-enough-parser';\nimport { query as q } from 'good-enough-parser';\nimport type { Ctx } from '../types';\nimport { qKotlinMultiMapOfVarAssignment } from './assignments';\nimport {\n  cleanupTempVars,\n  coalesceVariable,\n  increaseNestingDepth,\n  prependNestingDepth,\n  qValueMatcher,\n  qVariableAssignmentIdentifier,\n  reduceNestingDepth,\n  storeInTokenMap,\n  storeVarToken,\n} from './common';\nimport { qDependencyStrings } from './dependencies';\nimport { handleAssignment } from './handlers';\n\nconst qKotlinListOfAssignment = q.sym<Ctx>('listOf').tree({\n  type: 'wrapped-tree',\n  startsWith: '(',\n  endsWith: ')',\n  search: qDependencyStrings,\n});\n\nconst qKotlinSingleObjectVarAssignment = q.alt(\n  // val dep = mapOf(\"qux\" to \"foo:bar:\\${Versions.baz}\")\n  qKotlinMultiMapOfVarAssignment,\n  qVariableAssignmentIdentifier\n    .opt(q.op<Ctx>(':').sym('String'))\n    .op('=')\n    .handler(prependNestingDepth)\n    .handler(coalesceVariable)\n    .handler((ctx) => storeInTokenMap(ctx, 'keyToken'))\n    .alt(\n      // val deps = listOf(\"androidx.appcompat:appcompat:$baz\", listOf(\"androidx.webkit:webkit:${Versions.baz}\"))\n      qKotlinListOfAssignment,\n      // val dep: String = \"foo:bar:\" + Versions.baz\n      qValueMatcher\n        .handler((ctx) => storeInTokenMap(ctx, 'valToken'))\n        .handler(handleAssignment),\n    )\n    .handler(cleanupTempVars),\n);\n\n// object foo { ... }\nconst qKotlinMultiObjectExpr = (\n  search: q.QueryBuilder<Ctx, parser.Node>,\n): q.QueryBuilder<Ctx, parser.Node> =>\n  q.alt(\n    q.sym<Ctx>('object').sym(storeVarToken).tree({\n      type: 'wrapped-tree',\n      maxDepth: 1,\n      startsWith: '{',\n      endsWith: '}',\n      preHandler: increaseNestingDepth,\n      search,\n      postHandler: reduceNestingDepth,\n    }),\n    qKotlinSingleObjectVarAssignment,\n  );\n\nexport const qKotlinMultiObjectVarAssignment = qKotlinMultiObjectExpr(\n  qKotlinMultiObjectExpr(\n    qKotlinMultiObjectExpr(\n      qKotlinMultiObjectExpr(qKotlinSingleObjectVarAssignment),\n    ),\n  ),\n).handler(cleanupTempVars);\n"]}