{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../lib/modules/datasource/kubernetes-api/index.ts"],"names":[],"mappings":";;;;AAAA,0DAA0B;AAC1B,iGAAsD;AACtD,iGAA2E;AAC3E,8CAA2C;AAG3C,MAAM,OAAO,GAA6B,eAAK,CAAC,KAAK,CACnD,8BAAS,CAAC,GAAG,CAAC,2BAA2B,CAAE,CAC5C,CAAC;AAEW,QAAA,aAAa,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;AAE3D,MAAa,uBAAwB,SAAQ,uBAAU;IACrD,MAAM,CAAU,EAAE,GAAG,gBAAgB,CAAC;IAEtC;QACE,KAAK,CAAC,uBAAuB,CAAC,EAAE,CAAC,CAAC;IACpC,CAAC;IAEQ,iBAAiB,GAAG,uBAAuB,CAAC,EAAE,CAAC;IAExD,WAAW,CAAC,EACV,WAAW,GACO;QAClB,MAAM,QAAQ,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;QACtC,IAAI,QAAQ,EAAE,CAAC;YACb,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;YAC1D,OAAO,OAAO,CAAC,OAAO,CAAC,EAAE,QAAQ,EAAE,CAAC,CAAC;QACvC,CAAC;QAED,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IAC/B,CAAC;;AAnBH,0DAoBC","sourcesContent":["import JSON5 from 'json5';\nimport dataFiles from '../../../data-files.generated';\nimport * as kubernetesApiVersioning from '../../versioning/kubernetes-api';\nimport { Datasource } from '../datasource';\nimport type { GetReleasesConfig, ReleaseResult } from '../types';\n\nconst apiData: Record<string, string[]> = JSON5.parse(\n  dataFiles.get('data/kubernetes-api.json5')!,\n);\n\nexport const supportedApis = new Set(Object.keys(apiData));\n\nexport class KubernetesApiDatasource extends Datasource {\n  static readonly id = 'kubernetes-api';\n\n  constructor() {\n    super(KubernetesApiDatasource.id);\n  }\n\n  override defaultVersioning = kubernetesApiVersioning.id;\n\n  getReleases({\n    packageName,\n  }: GetReleasesConfig): Promise<ReleaseResult | null> {\n    const versions = apiData[packageName];\n    if (versions) {\n      const releases = versions.map((version) => ({ version }));\n      return Promise.resolve({ releases });\n    }\n\n    return Promise.resolve(null);\n  }\n}\n"]}