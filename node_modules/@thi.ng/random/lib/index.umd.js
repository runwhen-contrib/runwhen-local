!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@thi.ng/checks"),require("@thi.ng/api"),require("@thi.ng/hex")):"function"==typeof define&&define.amd?define(["exports","@thi.ng/checks","@thi.ng/api","@thi.ng/hex"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).thi=t.thi||{},t.thi.ng=t.thi.ng||{},t.thi.ng.random={}),t.thi.ng.checks,t.thi.ng.api,t.thi.ng.hex)}(this,(function(t,e,r,n){"use strict";const s=1/4294967295;class i{float(t=1){return this.int()*s*t}norm(t=1){return 2*(this.int()*s-.5)*t}minmax(t,e){return this.float()*(e-t)+t}}const u=Math.random;class o extends i{int(){return 4294967296*u()>>>0}float(t=1){return u()*t}norm(t=1){return 2*(u()-.5)*t}}const f=new o,h=(t,e,r=0,n=e.length)=>{for(let s=n;--s>=r;)e[s]=255&t.int();return e},a=e.hasCrypto()?(t,e=0,r=t.length)=>(window.crypto.getRandomValues(t.subarray(e,r)),t):(t,e,r)=>h(f,t,e,r);class c extends i{constructor(t=64){super(),this.buffer=new Uint8Array(t+3&-4),this.u32=new Uint32Array(this.buffer.buffer),this.i=t>>>2}copy(){return new c(this.buffer.length)}bytes(){return new Uint8Array(this.buffer.buffer)}int(){return this.i>=this.u32.length&&(a(this.buffer),this.i=0),this.u32[this.i++]}}const l=new c,b=[3737844653,799659867,3827263459,1552149530],d=[...b,4137311345];class y extends i{constructor(t=3737844653){super(),this.buffer=new Uint32Array([t,0])}copy(){const t=new y;return t.buffer.set(this.buffer),t}seed(t){return this.buffer.set([t,0]),this}int(){const t=this.buffer,e=1540483477,r=t[1]++*e>>>0,n=t[0]=(r^r>>24^t[0]*e>>>0)*e>>>0;return(n^n>>>13)>>>0}}class g extends i{constructor(t=b){super(),this.buffer=new Uint32Array(4),this.seed(t)}copy(){return new g(this.buffer)}bytes(){return new Uint8Array(this.buffer.buffer)}seed(t){return this.buffer.set(t),this}int(){const t=this.buffer;let e=t[0]+t[3];const r=(e<<7|e>>>25)>>>0;return e=t[1]<<9,t[2]^=t[0],t[3]^=t[1],t[1]^=t[2],t[0]^=t[3],t[2]^=e,e=t[3],t[3]=(e<<11|e>>>21)>>>0,r}}class m extends i{constructor(t=b){super(),this.buffer=new Uint32Array(4),this.seed(t)}copy(){return new m(this.buffer)}bytes(){return new Uint8Array(this.buffer.buffer)}seed(t){return this.buffer.set(t),this}int(){const t=this.buffer;let e,r=t[3];return r^=r<<11,r^=r>>>8,t[3]=t[2],t[2]=t[1],e=t[1]=t[0],t[0]=(r^e^e>>>19)>>>0}}class p extends i{constructor(t=d){super(),this.buffer=new Uint32Array(5),this.seed(t)}copy(){return new p(this.buffer)}seed(t){return this.buffer.set(t),this}bytes(){return new Uint8Array(this.buffer.buffer)}int(){const t=this.buffer;let e,r=t[3];return r^=r>>>2,r^=r<<1,t[3]=t[2],t[2]=t[1],e=t[1]=t[0],r^=e,r^=e<<4,t[0]=r,r+(t[4]+=362437)>>>0}}class w extends i{constructor(t=3737844653){super(),this.buffer=new Uint32Array(4),this.seed(t)}bytes(){return new Uint8Array(this.buffer.buffer)}copy(){const t=new w;return t.buffer.set(this.buffer),t}seed(t){const e=this.buffer;e.set([t,0,0,0]);for(let t=0,r=1;r<8;t=r++){let n=(e[3&t]^e[3&t]>>>30)>>>0;n=35173*n+((27655*n&65535)<<16)>>>0,e[3&r]^=r+n>>>0}return this}int(){const t=this.buffer;let e=t[0];return e^=e<<15,e^=e>>>18,e^=t[3]<<11,t[0]=t[1],t[1]=t[2],t[2]=t[3],t[3]=e,e+t[2]>>>0}}const x=(t=f)=>t.float()<.5,A=(t,e,r=[],n=100)=>{let s=0;for(;s<t;){let t,i=n;do{t=e()}while(r.includes(t)&&--i>0);if(i<=0)break;r.push(t),s++}return r},U=(t,e)=>(t=t||new Uint8Array(16),(t=e?h(e,t):a(t))[6]=64|15&t[6],t[8]=128|63&t[8],t);t.ARandom=i,t.CRYPTO=l,t.Crypto=c,t.SYSTEM=f,t.Smush32=y,t.SystemRandom=o,t.XorShift128=m,t.XorWow=p,t.Xoshiro128=g,t.XsAdd=w,t.coin=x,t.exponential=(t=f,e=10)=>0===e?()=>1/0:()=>-Math.log(1-t.float(1))/e,t.fairCoin=(t=f)=>{let e,r;do{e=x(t),r=x(t)}while(e===r);return e},t.gaussian=(t=f,e=24,r=0,n=1)=>()=>{let s=0,i=e;for(;i-- >0;)s+=t.norm(n);return s/e+r},t.geometric=(t=f,e=.5)=>e<=0?()=>1/0:e>=1?()=>1:(e=Math.log(1-e),()=>Math.floor(Math.log(1-t.float(1))/e)+1),t.normal=(t=f,e=0,r=1)=>{let n,s,i;return()=>{if(null!=n)s=n,n=null;else do{n=t.norm(),s=t.norm(),i=n*n+s*s}while(i>1||0===i);return e+r*s*Math.sqrt(-2*Math.log(i)/i)}},t.randomBytes=a,t.randomBytesFrom=h,t.randomID=(t=4,e="",r="abcdefghijklmnopqrstuvwxyz",n=f)=>{const s=r.length;for(;--t>=0;)e+=r[n.int()%s];return e},t.uniform=(t=f,e=0,r=1)=>()=>t.minmax(e,r),t.uniqueIndices=(t,e,n,s=e,i=f)=>(r.assert(t>=0&&t<=e,`k must be in [0, ${e}] interval`),A(t,(()=>i.int()%e),n,s)),t.uniqueValuesFrom=A,t.uuid=(t,e=0)=>n.uuid(t||U(),e),t.uuidv4Bytes=U,t.weightedRandom=(t,e,n=f)=>{const s=t.length;r.assert(s>0,"no choices given");const i=e?t.map(((t,r)=>[e[r]||0,t])).sort(((t,e)=>e[0]-t[0])):t.map((t=>[1,t])),u=i.reduce(((t,e)=>t+e[0]),0);return u<=0&&console.warn("total weights <= 0"),()=>{const t=n.float(u);let e=u;for(let r=0;r<s;r++)if(e-=i[r][0],e<=t)return i[r][1]}},Object.defineProperty(t,"__esModule",{value:!0})}));